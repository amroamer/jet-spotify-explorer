define(["ojs/ojcore","knockout","jquery","../spotify","knockout-postbox","ojs/ojarraytabledatasource","ojs/ojselectcombobox","ojs/ojlistview"],function(t,e,s,r){function o(){var s=this;s.query=e.observable(""),s.artists=e.observableArray([]).syncWith("searchResults",!0),s.dataSource=new t.ArrayTableDataSource(s.artists,{idAttribute:"id"}),s.selectedArtist=e.observable({images:[]}).publishOn("selectedArtist"),s.query.subscribe(function(){s.artists.removeAll(),r.search(s.query(),[["type","artist"]]).then(function(t){t.artists.items.forEach(function(t,e){t.thumbnail=t.images.pop(),t.cover=t.images[0]||t.thumbnail,t.index=e,s.artists.push(t)})},function(t){console.error(t)})}),s.selectArtist=function(e,r){var o,i;i=Number(r.currentTarget.id),o=s.artists()[i],s.selectedArtist(o),t.Router.rootInstance.go("artist")}}return o});