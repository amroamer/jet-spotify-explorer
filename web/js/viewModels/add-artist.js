define(["ojs/ojcore","knockout","jquery","../spotify","knockout-postbox","ojs/ojbutton","ojs/ojinputnumber","ojs/ojinputtext","ojs/ojknockout-validation","ojs/ojselectcombobox"],function(e,o,r,n){function t(){var e=this;e.name=o.observable(""),e.genre=o.observableArray(["rock"]),e.year=o.observable((new Date).getFullYear()),e.tracker=o.observable(),e.shouldDisableAdd=function(){var r=o.utils.unwrapObservable(e.tracker),n=r&&(r.invalidShown||"default"===e.genre()[0]);return n};var r=function(e){return e.showMessages(),!e.focusOnFirstInvalid()};e.save=function(){var n=o.utils.unwrapObservable(e.tracker);r(n)&&(o.postbox.publish("add-artist",{name:e.name(),genre:e.genre()[0],year:e.year()}),window.history.back())},e.noDefault={validate:function(e){return"default"!==e}}}return t});